<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VWO Elite Cinematic</title>
    <style>
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #000000;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        #videoContainer {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1s ease-in;
            scale: 1.05;
        }

        .vignette {
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, transparent 0%, rgba(0, 0, 0, 0.3) 60%, rgba(0, 0, 0, 0.8) 100%);
            pointer-events: none;
            z-index: 10;
        }

        #logOverlay {
            position: absolute;
            top: 3rem;
            right: 3rem;
            text-align: right;
            z-index: 20;
            max-width: 350px;
        }

        .log-item {
            font-family: 'Courier New', Courier, monospace;
            font-size: 1rem;
            letter-spacing: 0.1em;
            margin-bottom: 0.75rem;
            opacity: 0;
            transform: translateY(-10px);
            filter: blur(4px);
            color: #22d3ee;
            /* cyan-400 */
            text-shadow: 0 0 15px rgba(34, 211, 238, 0.6);
            transition: all 0.4s ease-out;
        }

        .log-item.visible {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }

        .log-item.complete {
            color: #ffffff;
            opacity: 0.6;
            text-shadow: none;
        }

        .ready video {
            opacity: 0.95;
        }
    </style>
</head>

<body>
    <div id="videoContainer">
        <video id="splashVideo" muted playsinline loop>
            <source src="Installer/1_rotation.webm" type="video/webm">
        </video>
        <div class="vignette"></div>
    </div>

    <div id="logOverlay"></div>

    <script>
        const video = document.getElementById('splashVideo');
        const overlay = document.getElementById('logOverlay');

        const BOOT_SEQUENCE = [
            "Initializing VWO_ELITE KERNEL...",
            "Loading Neural Interface...",
            "Verifying Identity Matrix...",
            "Mounting Knowledge Base (RAG)...",
            "Connecting to Gemini 1.5 Pro...",
            "Synchronizing Quantum States...",
            "Optimizing 3D Render Engine...",
            "Establishing Secure Uplink...",
            "SYSTEM READY"
        ];

        function runLogSequence() {
            BOOT_SEQUENCE.forEach((text, i) => {
                setTimeout(() => {
                    const item = document.createElement('div');
                    item.className = 'log-item';
                    item.textContent = text;
                    overlay.appendChild(item);

                    // Trigger reflow for animation
                    item.offsetHeight;
                    item.classList.add('visible');

                    // Mark previous as complete
                    if (overlay.children.length > 1) {
                        overlay.children[overlay.children.length - 2].classList.add('complete');
                    }
                }, i * 900); // Progressively show logs
            });
        }

        // Notify main process when the first frame is ready
        video.addEventListener('canplaythrough', () => {
            if (document.body.classList.contains('ready')) return;

            document.body.classList.add('ready');
            video.play();
            runLogSequence();

            // Signal main process to show window
            const { ipcRenderer } = require('electron');
            if (ipcRenderer) {
                ipcRenderer.send('splash:video-ready');
            }
        });

        // Fallback: If video fails, still signal ready after a delay
        setTimeout(() => {
            if (!document.body.classList.contains('ready')) {
                document.body.classList.add('ready');
                const { ipcRenderer } = require('electron');
                if (ipcRenderer) {
                    ipcRenderer.send('splash:video-ready');
                }
            }
        }, 2500);
    </script>
</body>

</html>